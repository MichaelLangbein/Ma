\section{Maps}

A lot of this information comes from here: \href{http://cite.opengeospatial.org/pub/cite/files/edu/wmts/text/operations.html}{cite.opengeospatial.org}
The map-stack is certainly one of the most demanding stacks of technology that is in widespread use today, and clearly a field where a developer can sharpen his profile.

\subsection{Available software} 

There are so many non-orthogonal tools out there that an overview can't do harm.

\begin{itemize}
    \item Data-storage in db
        \begin{itemize}
            \item Any PostgeSQL binding
            \item Geodjango, for a Website-ORM.
        \end{itemize}
    \item Map-creation
        \begin{itemize}
            \item simple numpy raster data to geo-tiffs: gdal + basemap (deprecated) or cartopy. There is very good documentation here: \href{https://annefou.github.io/metos\_python/04-plotting/}{annefou.github.io}
            \item QGis
            \item MapServer (c)
            \item GeoServer (java)
            \item Mapnik (c, python)
            \item TileMill (python)
        \end{itemize}
    \item Serving data
        \begin{itemize}
	    \item QGis Server
            \item MapServer (c)
            \item GeoServer (java)
            \item Mapnik (c, python)
            \item FeatureServer (python): a WFS 
        \end{itemize}
    \item Displaying data
        \begin{itemize}
            \item Folium: Builds websites based on Leaflet.js, but with a python api.
            \item Geodjango with django-leaflet
            \item OpenLayers
        \end{itemize}
\end{itemize}




\subsection{Server}
A popular choice for serverside software is MapServer (C, CGI and PHP) or GeoServer (Java). Servers locally create GeoTiff files: high resolution images that are geo-referenced. They are then converted to png's and exposed via a HTTP-based API. We need to know about two important implementations. Both of them can be called via SOAP or REST-Parameters (KVP, for key-value-pairs, in geo-lingo). We'll only describe the GET-Parameters here. 

\begin{itemize}
    \item WMS: delivers custom made images for a given map-square. 
    \begin{itemize}
        \item Version 1.1.1
            \begin{itemize}
                \item GetCapabilites: \inlinecode{?service=wms&version=1.1.1&request=GetCapabilites}
                \item GetMap \inlinecode{?service=wms&version=1.1.1&request=GetMap&src=EPSG:31468&format=image/png&BBOX=447,532,234,124&layers=l1,l2&widht=1000&height=1000}
                \item GetFeatureInfo
            \end{itemize}
        \item Version 1.3
            \begin{itemize}
                \item BBOX: andere Achsenreihenfolge! Von vielen clients noch immer nicht richtig verarbeitet. 
            \end{itemize}
    \end{itemize}
    
    \item WMTS: has a pre-made pyramid of images. Clients pass an index for the pyramid instead of the coordinates of the selection. 
    \begin{itemize}
        \item Version 1.0.0.
            \begin{itemize}
                \item GetCapabilities \inlinecode{?service=wmts&version=1.0.0&request=GetCapabilites}
                \item GetTile \inlinecode{?service=wmts&version=1.0.0&request=GetTile&layer=l1&format=image/png&TileMatrixSet=default28m&TileMatrix=1&TileRow=1&TileCol=1}
                \item GetFeatureInfo
            \end{itemize}
    \end{itemize}

    \item WFS: instead of images, a json-representation of features is passed to the client. 
        \begin{itemize}
            \item 
        \end{itemize}

    \item WPS
\end{itemize}

Usually, service providers expose \emph{multiple} urls for you to query, so that you can fetch images from several servers in parallel. 

\subsubsection{Geoserver}

Geoserver is a type of CMS for geodata. It is built with spring as its backend. 
You can create plugins that implement a certain type of OWS (WMS, WFS, WPS, or something completely custom) by building a jar that has geoserver as its maven-parent and then dropping the built jar into the geoserver-home-directory.



\subsection{Client}

A popular javascript mapping library is openlayers. 

\begin{itemize}
    \item source: the ogc-protocol for how to \emph{obtain} the data
        \begin{itemize}
            \item \inlinecode{TileWMS}
            \item \inlinecode{WMTS}
            \item \inlinecode{XYZ}
        \end{itemize}
    \item layer: the ol-graphics for how to \emph{display} the data
        \begin{itemize}
            \item \inlinecode{TileLayer}
            \item \inlinecode{VectorLayer}
        \end{itemize}
\end{itemize}




